<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeri | BRIKAPDUJA</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Arial, sans-serif; background: #f4f4f4; color: #222; }
        
        /* Navigasi */
        nav { position: fixed; top: 0; left: 0; right: 0; height: 60px; display: flex; background: #fff; border-bottom: 1px solid #ddd; z-index: 9999; }
        nav a { flex: 1; text-align: center; line-height: 60px; text-decoration: none; font-weight: 600; font-size: 16px; color: #b00000; }
        nav a.active { border-bottom: 3px solid #b00000; }

        /* Header Section */
        .about { margin-top: 60px; padding: 40px 24px; text-align: center; background: #fff; }
        .about h1 { margin: 0 0 8px; font-size: 24px; color: #b00000; }
        .about p { margin: 0 auto; max-width: 720px; font-size: 15px; color: #555; line-height: 1.6; }

        /* Galeri Grid */
        .gallery { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 8px; 
            padding: 8px; 
            max-width: 1200px; 
            margin: 0 auto;
        }
        .gallery img { 
            width: 100%; 
            aspect-ratio: 1/1; 
            object-fit: cover; 
            cursor: pointer; 
            border-radius: 4px;
            transition: transform 0.2s, opacity 0.2s;
            background: #ddd; /* Warna loading */
        }
        .gallery img:hover { transform: scale(1.02); opacity: 0.9; }

        /* Fullscreen Viewer */
        .viewer { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 10000; cursor: pointer; }
        .viewer img { max-width: 95%; max-height: 95%; border-radius: 4px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        
        /* Loading Text */
        #loading { text-align: center; padding: 20px; color: #888; font-style: italic; }
    </style>
</head>
<body>

<nav>
    <a href="index.html">Beranda</a>
    <a href="struktur.html">Struktur</a>
    <a href="galeri.html" class="active">Galeri</a>
</nav>

<section class="about">
    <h1>Tentang Kami</h1>
    <p>Galeri dokumentasi BRIKAPDUJA. Seluruh foto tersinkron otomatis dari Google Drive.</p>
</section>

<div id="loading">Memuat foto...</div>
<div class="gallery" id="gallery"></div>

<div class="viewer" id="viewer" onclick="this.style.display='none'">
    <img id="viewerImg" src="" alt="Full View">
</div>

<script>
// --- KONFIGURASI ---
const API_KEY = "AIzaSyAr5tgoX9c8fnjhuqhcK3EBzW_w3n_mb7A";
const FOLDER_ID = "1E-A9W7e0DRb3W3oppAVQ4MICTNTve6NB";

// Mengambil data file dari folder Google Drive
// Kita menambahkan 'thumbnailLink' karena ini lebih stabil untuk ditampilkan di web
fetch(`https://www.googleapis.com/drive/v3/files?q='${FOLDER_ID}'+in+parents+and+trashed=false&fields=files(id,name,mimeType,thumbnailLink)&key=${API_KEY}`)
.then(res => {
    if (!res.ok) throw new Error("Gagal mengambil data. Cek API Key atau Izin Folder.");
    return res.json();
})
.then(data => {
    const galeri = document.getElementById("gallery");
    const loading = document.getElementById("loading");
    
    if (data.files && data.files.length > 0) {
        loading.style.display = "none";
        data.files.forEach(file => {
            // Hanya tampilkan jika file adalah gambar
            if(file.mimeType.startsWith("image/")) {
                const img = document.createElement("img");
                
                // thumbnailLink biasanya berukuran kecil (s220). 
                // Kita ubah s220 menjadi s1000 agar gambar tajam/HD.
                const highResImg = file.thumbnailLink.replace('=s220', '=s1000');
                
                img.src = highResImg;
                img.alt = file.name;
                img.loading = "lazy"; // Biar website lebih cepat terbuka
                
                img.onclick = (e) => {
                    e.stopPropagation();
                    document.getElementById("viewerImg").src = highResImg;
                    document.getElementById("viewer").style.display = "flex";
                };
                
                galeri.appendChild(img);
            }
        });
    } else {
        loading.innerText = "Tidak ada foto ditemukan di folder tersebut.";
    }
})
.catch(err => {
    console.error("Error load gallery:", err);
    document.getElementById("loading").innerText = "Error: Pastikan Folder Drive sudah di-Share ke 'Anyone with the link'.";
});
</script>

</body>
</html>
